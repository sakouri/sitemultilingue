{% load i18n %}
<!DOCTYPE html>
<html lang="{% get_current_language as LANGUAGE_CODE %}">
<head>
    <title>{% trans "List of Articles" %}</title>
</head>
<body>
    <h1>{% trans "List of Articles" %}</h1>
    <ul>
        {% for article in articles %}
            <li>
                <h2>{{ article.title }}</h2>
                <p>{% trans "Published on" %}: {{ article.publication_date }}</p>
                <p>{{ article.content }}</p>
            </li>
        {% endfor %}
    </ul>
    <!-- Ajout de la fonctionnalitÃ© de changement de langue -->
    <h2>{% trans "Change language" %}</h2>
    <form action="{% url 'set_language' %}" method="post">
        {% csrf_token %}
        <input name="next" type="hidden" value="{{ redirect_to }}">
        <select name="language">
            {% get_current_language as LANGUAGE_CODE %}
            {% get_available_languages as LANGUAGES %}
            {% for lang in LANGUAGES %}
                <option value="{{ lang.0 }}"{% if lang.0 == LANGUAGE_CODE %} selected{% endif %}>
                    {{ lang.1 }}
                </option>
            {% endfor %}
        </select>
        <input type="submit" value="{% trans 'Change' %}">
    </form>
</body>
</html>
